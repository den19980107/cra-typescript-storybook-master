{"version":3,"sources":["../../../src/utils/createMessageMutationObserver.ts"],"names":["createMessageMutationObserver","mutationObserver","target","querySelector","closest","observer","MutationObserver","mutations","filter","x","addedNodes","length","map","Array","prototype","slice","call","reduce","acc","val","concat","forEach","n","config","childList","observe"],"mappings":";;;;;;;AAAA;;AAEe,SAASA,6BAAT,CACXC,gBADW,EAEb;AACE;AACA,MAAMC,MAAM,GAAG,+BAAeC,aAAf,CAA6B,gBAA7B,EAA+CC,OAA/C,CAAuD,IAAvD,CAAf,CAFF,CAIE;;AACA,MAAMC,QAAQ,GAAG,IAAIC,gBAAJ,CAAqB,UAAUC,SAAV,EAAqB;AACvDA,IAAAA,SAAS,CACJC,MADL,CACY,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACC,UAAF,CAAaC,MAAb,GAAsB,CAA1B;AAAA,KADb,EAEKC,GAFL,CAES,UAAAH,CAAC;AAAA,aAAII,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BP,CAAC,CAACC,UAA7B,CAAJ;AAAA,KAFV,EAGKO,MAHL,CAGY,UAACC,GAAD,EAAMC,GAAN;AAAA,aAAcD,GAAG,CAACE,MAAJ,CAAWD,GAAX,CAAd;AAAA,KAHZ,EAG2C,EAH3C,EAIKE,OAJL,CAIa,UAACC,CAAD;AAAA,aAAsBrB,gBAAgB,CAACqB,CAAD,EAAIjB,QAAJ,CAAtC;AAAA,KAJb;AAKH,GANgB,CAAjB,CALF,CAaE;;AACA,MAAMkB,MAAM,GAAG;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAf,CAdF,CAgBE;;AACAnB,EAAAA,QAAQ,CAACoB,OAAT,CAAiBvB,MAAjB,EAAyBqB,MAAzB;AACH","sourcesContent":["import { getContainer } from \"./Container\"\n\nexport default function createMessageMutationObserver(\n    mutationObserver: (mutation: HTMLLIElement, observer: MutationObserver) => void\n) {\n    // select the target node\n    const target = getContainer().querySelector('div.unread-tag').closest('ul')\n\n    // create an observer instance\n    const observer = new MutationObserver(function (mutations) {\n        mutations\n            .filter(x => x.addedNodes.length > 0)\n            .map(x => Array.prototype.slice.call(x.addedNodes))\n            .reduce((acc, val) => acc.concat(val), [])\n            .forEach((n: HTMLLIElement) => mutationObserver(n, observer))\n    })\n\n    // configuration of the observer:\n    const config = { childList: true }\n    \n    // pass in the target node, as well as the observer options\n    observer.observe(target, config)\n}"],"file":"createMessageMutationObserver.js"}