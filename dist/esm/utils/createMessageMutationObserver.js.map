{"version":3,"sources":["../../../src/utils/createMessageMutationObserver.ts"],"names":["getContainer","createMessageMutationObserver","mutationObserver","target","querySelector","closest","observer","MutationObserver","mutations","filter","x","addedNodes","length","map","Array","prototype","slice","call","reduce","acc","val","concat","forEach","n","config","childList","observe"],"mappings":"AAAA,SAASA,YAAT,QAA6B,aAA7B;AAEA,eAAe,SAASC,6BAAT,CACXC,gBADW,EAEb;AACE;AACA,QAAMC,MAAM,GAAGH,YAAY,GAAGI,aAAf,CAA6B,gBAA7B,EAA+CC,OAA/C,CAAuD,IAAvD,CAAf,CAFF,CAIE;;AACA,QAAMC,QAAQ,GAAG,IAAIC,gBAAJ,CAAqB,UAAUC,SAAV,EAAqB;AACvDA,IAAAA,SAAS,CACJC,MADL,CACYC,CAAC,IAAIA,CAAC,CAACC,UAAF,CAAaC,MAAb,GAAsB,CADvC,EAEKC,GAFL,CAESH,CAAC,IAAII,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BP,CAAC,CAACC,UAA7B,CAFd,EAGKO,MAHL,CAGY,CAACC,GAAD,EAAMC,GAAN,KAAcD,GAAG,CAACE,MAAJ,CAAWD,GAAX,CAH1B,EAG2C,EAH3C,EAIKE,OAJL,CAIcC,CAAD,IAAsBrB,gBAAgB,CAACqB,CAAD,EAAIjB,QAAJ,CAJnD;AAKH,GANgB,CAAjB,CALF,CAaE;;AACA,QAAMkB,MAAM,GAAG;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAf,CAdF,CAgBE;;AACAnB,EAAAA,QAAQ,CAACoB,OAAT,CAAiBvB,MAAjB,EAAyBqB,MAAzB;AACH","sourcesContent":["import { getContainer } from \"./Container\"\n\nexport default function createMessageMutationObserver(\n    mutationObserver: (mutation: HTMLLIElement, observer: MutationObserver) => void\n) {\n    // select the target node\n    const target = getContainer().querySelector('div.unread-tag').closest('ul')\n\n    // create an observer instance\n    const observer = new MutationObserver(function (mutations) {\n        mutations\n            .filter(x => x.addedNodes.length > 0)\n            .map(x => Array.prototype.slice.call(x.addedNodes))\n            .reduce((acc, val) => acc.concat(val), [])\n            .forEach((n: HTMLLIElement) => mutationObserver(n, observer))\n    })\n\n    // configuration of the observer:\n    const config = { childList: true }\n    \n    // pass in the target node, as well as the observer options\n    observer.observe(target, config)\n}"],"file":"createMessageMutationObserver.js"}